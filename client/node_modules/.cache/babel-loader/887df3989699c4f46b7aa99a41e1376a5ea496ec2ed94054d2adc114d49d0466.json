{"ast":null,"code":"import axios from 'axios';\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\nconst api = axios.create({\n  baseURL: API_BASE_URL,\n  timeout: 10000,\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\n\n// Request interceptor for logging\napi.interceptors.request.use(config => {\n  console.log(`ðŸš€ Making ${config.method.toUpperCase()} request to: ${config.url}`);\n  console.log('ðŸ“¦ Request data:', JSON.stringify(config.data, null, 2));\n  return config;\n}, error => {\n  console.error('âŒ Request error:', error);\n  return Promise.reject(error);\n});\n\n// Response interceptor for better error handling\napi.interceptors.response.use(response => {\n  console.log('âœ… API Response:', response.data);\n  return response.data;\n}, error => {\n  var _error$response, _error$response2, _error$response3, _error$response4, _error$response5, _error$response5$data;\n  console.error('âŒ API Error Status:', (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status);\n  console.error('âŒ API Error Data:', (_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.data);\n  console.error('âŒ Full Error Object:', error);\n  if (((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : _error$response3.status) === 400) {\n    const errorData = error.response.data;\n    console.error('ðŸ” VALIDATION ERRORS FROM SERVER:');\n    console.error(JSON.stringify(errorData, null, 2));\n\n    // Extract specific validation messages\n    let errorMessage = 'Validation failed';\n    if (errorData.errors) {\n      // Mongoose validation errors\n      const errorMessages = Object.values(errorData.errors).map(err => err.message || err);\n      errorMessage = errorMessages.join(', ');\n    } else if (errorData.message) {\n      // Direct error message\n      errorMessage = errorData.message;\n    } else if (typeof errorData === 'string') {\n      // String error\n      errorMessage = errorData;\n    } else if (Array.isArray(errorData)) {\n      // Array of errors\n      errorMessage = errorData.map(err => err.msg || err.message || err).join(', ');\n    }\n    console.error('ðŸ“ Extracted error message:', errorMessage);\n    throw new Error(errorMessage);\n  }\n  if (((_error$response4 = error.response) === null || _error$response4 === void 0 ? void 0 : _error$response4.status) === 500) {\n    throw new Error('Server error. Please try again later.');\n  }\n  if (error.code === 'ECONNABORTED') {\n    throw new Error('Request timeout. Please check your connection.');\n  }\n  if (!error.response) {\n    throw new Error('Network error. Please check your connection and try again.');\n  }\n  throw new Error(((_error$response5 = error.response) === null || _error$response5 === void 0 ? void 0 : (_error$response5$data = _error$response5.data) === null || _error$response5$data === void 0 ? void 0 : _error$response5$data.message) || 'An unexpected error occurred.');\n});\nexport const getBugs = async () => {\n  try {\n    const response = await api.get('/bugs');\n    return response.bugs || [];\n  } catch (error) {\n    console.error('Error fetching bugs:', error);\n    throw error;\n  }\n};\nexport const createBug = async bugData => {\n  try {\n    var _bugData$title, _bugData$description, _bugData$environment, _bugData$environment2, _bugData$environment3, _bugData$stepsToRepro, _bugData$expectedBeha, _bugData$actualBehavi;\n    // Create a clean data object with all possible fields\n    const submissionData = {\n      title: ((_bugData$title = bugData.title) === null || _bugData$title === void 0 ? void 0 : _bugData$title.trim()) || '',\n      description: ((_bugData$description = bugData.description) === null || _bugData$description === void 0 ? void 0 : _bugData$description.trim()) || '',\n      priority: bugData.priority || 'medium',\n      status: bugData.status || 'open',\n      environment: {\n        os: ((_bugData$environment = bugData.environment) === null || _bugData$environment === void 0 ? void 0 : _bugData$environment.os) || '',\n        browser: ((_bugData$environment2 = bugData.environment) === null || _bugData$environment2 === void 0 ? void 0 : _bugData$environment2.browser) || '',\n        version: ((_bugData$environment3 = bugData.environment) === null || _bugData$environment3 === void 0 ? void 0 : _bugData$environment3.version) || ''\n      },\n      stepsToReproduce: ((_bugData$stepsToRepro = bugData.stepsToReproduce) === null || _bugData$stepsToRepro === void 0 ? void 0 : _bugData$stepsToRepro.trim()) || '',\n      expectedBehavior: ((_bugData$expectedBeha = bugData.expectedBehavior) === null || _bugData$expectedBeha === void 0 ? void 0 : _bugData$expectedBeha.trim()) || '',\n      actualBehavior: ((_bugData$actualBehavi = bugData.actualBehavior) === null || _bugData$actualBehavi === void 0 ? void 0 : _bugData$actualBehavi.trim()) || '',\n      // Add any other fields your backend might expect\n      reporter: 'user',\n      // You might need to include who's reporting the bug\n      createdAt: new Date().toISOString()\n    };\n    console.log('ðŸ“¤ Final submission data:', JSON.stringify(submissionData, null, 2));\n    return await api.post('/bugs', submissionData);\n  } catch (error) {\n    console.error('Error creating bug:', error);\n    throw error;\n  }\n};","map":{"version":3,"names":["axios","API_BASE_URL","process","env","REACT_APP_API_URL","api","create","baseURL","timeout","headers","interceptors","request","use","config","console","log","method","toUpperCase","url","JSON","stringify","data","error","Promise","reject","response","_error$response","_error$response2","_error$response3","_error$response4","_error$response5","_error$response5$data","status","errorData","errorMessage","errors","errorMessages","Object","values","map","err","message","join","Array","isArray","msg","Error","code","getBugs","get","bugs","createBug","bugData","_bugData$title","_bugData$description","_bugData$environment","_bugData$environment2","_bugData$environment3","_bugData$stepsToRepro","_bugData$expectedBeha","_bugData$actualBehavi","submissionData","title","trim","description","priority","environment","os","browser","version","stepsToReproduce","expectedBehavior","actualBehavior","reporter","createdAt","Date","toISOString","post"],"sources":["C:/Users/Joan/Desktop/mernstack/testing-and-debugging-ensuring-mern-app-reliability-keshiindungi/client/src/services/bugService.js"],"sourcesContent":["import axios from 'axios';\r\n\r\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\r\n\r\nconst api = axios.create({\r\n  baseURL: API_BASE_URL,\r\n  timeout: 10000,\r\n  headers: {\r\n    'Content-Type': 'application/json'\r\n  }\r\n});\r\n\r\n// Request interceptor for logging\r\napi.interceptors.request.use(\r\n  (config) => {\r\n    console.log(`ðŸš€ Making ${config.method.toUpperCase()} request to: ${config.url}`);\r\n    console.log('ðŸ“¦ Request data:', JSON.stringify(config.data, null, 2));\r\n    return config;\r\n  },\r\n  (error) => {\r\n    console.error('âŒ Request error:', error);\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n\r\n\r\n// Response interceptor for better error handling\r\napi.interceptors.response.use(\r\n  (response) => {\r\n    console.log('âœ… API Response:', response.data);\r\n    return response.data;\r\n  },\r\n  (error) => {\r\n    console.error('âŒ API Error Status:', error.response?.status);\r\n    console.error('âŒ API Error Data:', error.response?.data);\r\n    console.error('âŒ Full Error Object:', error);\r\n    \r\n    if (error.response?.status === 400) {\r\n      const errorData = error.response.data;\r\n      console.error('ðŸ” VALIDATION ERRORS FROM SERVER:');\r\n      console.error(JSON.stringify(errorData, null, 2));\r\n      \r\n      // Extract specific validation messages\r\n      let errorMessage = 'Validation failed';\r\n      \r\n      if (errorData.errors) {\r\n        // Mongoose validation errors\r\n        const errorMessages = Object.values(errorData.errors).map(err => err.message || err);\r\n        errorMessage = errorMessages.join(', ');\r\n      } else if (errorData.message) {\r\n        // Direct error message\r\n        errorMessage = errorData.message;\r\n      } else if (typeof errorData === 'string') {\r\n        // String error\r\n        errorMessage = errorData;\r\n      } else if (Array.isArray(errorData)) {\r\n        // Array of errors\r\n        errorMessage = errorData.map(err => err.msg || err.message || err).join(', ');\r\n      }\r\n      \r\n      console.error('ðŸ“ Extracted error message:', errorMessage);\r\n      throw new Error(errorMessage);\r\n    }\r\n    \r\n    if (error.response?.status === 500) {\r\n      throw new Error('Server error. Please try again later.');\r\n    }\r\n    \r\n    if (error.code === 'ECONNABORTED') {\r\n      throw new Error('Request timeout. Please check your connection.');\r\n    }\r\n    \r\n    if (!error.response) {\r\n      throw new Error('Network error. Please check your connection and try again.');\r\n    }\r\n    \r\n    throw new Error(error.response?.data?.message || 'An unexpected error occurred.');\r\n  }\r\n);\r\n\r\nexport const getBugs = async () => {\r\n  try {\r\n    const response = await api.get('/bugs');\r\n    return response.bugs || [];\r\n  } catch (error) {\r\n    console.error('Error fetching bugs:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const createBug = async (bugData) => {\r\n  try {\r\n    // Create a clean data object with all possible fields\r\n    const submissionData = {\r\n      title: bugData.title?.trim() || '',\r\n      description: bugData.description?.trim() || '',\r\n      priority: bugData.priority || 'medium',\r\n      status: bugData.status || 'open',\r\n      environment: {\r\n        os: bugData.environment?.os || '',\r\n        browser: bugData.environment?.browser || '',\r\n        version: bugData.environment?.version || ''\r\n      },\r\n      stepsToReproduce: bugData.stepsToReproduce?.trim() || '',\r\n      expectedBehavior: bugData.expectedBehavior?.trim() || '',\r\n      actualBehavior: bugData.actualBehavior?.trim() || '',\r\n      // Add any other fields your backend might expect\r\n      reporter: 'user', // You might need to include who's reporting the bug\r\n      createdAt: new Date().toISOString()\r\n    };\r\n\r\n    console.log('ðŸ“¤ Final submission data:', JSON.stringify(submissionData, null, 2));\r\n    \r\n    return await api.post('/bugs', submissionData);\r\n  } catch (error) {\r\n    console.error('Error creating bug:', error);\r\n    throw error;\r\n  }\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}