{"ast":null,"code":"import axios from 'axios';\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\nconst api = axios.create({\n  baseURL: API_BASE_URL,\n  timeout: 10000,\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\n\n// Request interceptor for logging\napi.interceptors.request.use(config => {\n  console.log(`ðŸš€ Making ${config.method.toUpperCase()} request to: ${config.url}`);\n  console.log('ðŸ“¦ Request data:', config.data);\n  return config;\n}, error => {\n  console.error('âŒ Request error:', error);\n  return Promise.reject(error);\n});\n\n// Response interceptor for better error handling\napi.interceptors.response.use(response => {\n  console.log('âœ… API Response:', response.data);\n  return response.data;\n}, error => {\n  var _error$response, _error$response2, _error$response3, _error$response4, _error$response5, _error$response6, _error$response7, _error$response7$data;\n  console.error('âŒ API Error Details:', {\n    status: (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status,\n    statusText: (_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.statusText,\n    data: (_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : _error$response3.data,\n    headers: (_error$response4 = error.response) === null || _error$response4 === void 0 ? void 0 : _error$response4.headers\n  });\n  if (((_error$response5 = error.response) === null || _error$response5 === void 0 ? void 0 : _error$response5.status) === 400) {\n    const validationErrors = error.response.data;\n    console.error('ðŸ” Validation errors from server:', validationErrors);\n\n    // Extract specific validation messages\n    let errorMessage = 'Validation failed';\n    if (validationErrors.errors) {\n      errorMessage = Object.values(validationErrors.errors).join(', ');\n    } else if (validationErrors.message) {\n      errorMessage = validationErrors.message;\n    }\n    throw new Error(errorMessage);\n  }\n  if (((_error$response6 = error.response) === null || _error$response6 === void 0 ? void 0 : _error$response6.status) === 500) {\n    throw new Error('Server error. Please try again later.');\n  }\n  if (error.code === 'ECONNABORTED') {\n    throw new Error('Request timeout. Please check your connection.');\n  }\n  if (!error.response) {\n    throw new Error('Network error. Please check your connection and try again.');\n  }\n  throw new Error(((_error$response7 = error.response) === null || _error$response7 === void 0 ? void 0 : (_error$response7$data = _error$response7.data) === null || _error$response7$data === void 0 ? void 0 : _error$response7$data.message) || 'An unexpected error occurred.');\n});\nexport const getBugs = async () => {\n  try {\n    const response = await api.get('/bugs');\n    return response.bugs || [];\n  } catch (error) {\n    console.error('Error fetching bugs:', error);\n    throw error;\n  }\n};\nexport const createBug = async bugData => {\n  try {\n    var _bugData$environment, _bugData$environment2, _bugData$environment3;\n    // Ensure all required fields are present\n    const submissionData = {\n      title: bugData.title,\n      description: bugData.description,\n      priority: bugData.priority,\n      status: bugData.status || 'open',\n      environment: {\n        os: (_bugData$environment = bugData.environment) === null || _bugData$environment === void 0 ? void 0 : _bugData$environment.os,\n        browser: ((_bugData$environment2 = bugData.environment) === null || _bugData$environment2 === void 0 ? void 0 : _bugData$environment2.browser) || '',\n        version: ((_bugData$environment3 = bugData.environment) === null || _bugData$environment3 === void 0 ? void 0 : _bugData$environment3.version) || ''\n      },\n      stepsToReproduce: bugData.stepsToReproduce || '',\n      expectedBehavior: bugData.expectedBehavior || '',\n      actualBehavior: bugData.actualBehavior || ''\n    };\n    console.log('ðŸ“¤ Final data being sent to API:', JSON.stringify(submissionData, null, 2));\n    return await api.post('/bugs', submissionData);\n  } catch (error) {\n    console.error('Error creating bug:', error);\n    throw error;\n  }\n};","map":{"version":3,"names":["axios","API_BASE_URL","process","env","REACT_APP_API_URL","api","create","baseURL","timeout","headers","interceptors","request","use","config","console","log","method","toUpperCase","url","data","error","Promise","reject","response","_error$response","_error$response2","_error$response3","_error$response4","_error$response5","_error$response6","_error$response7","_error$response7$data","status","statusText","validationErrors","errorMessage","errors","Object","values","join","message","Error","code","getBugs","get","bugs","createBug","bugData","_bugData$environment","_bugData$environment2","_bugData$environment3","submissionData","title","description","priority","environment","os","browser","version","stepsToReproduce","expectedBehavior","actualBehavior","JSON","stringify","post"],"sources":["C:/Users/Joan/Desktop/mernstack/testing-and-debugging-ensuring-mern-app-reliability-keshiindungi/client/src/services/bugService.js"],"sourcesContent":["import axios from 'axios';\r\n\r\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\r\n\r\nconst api = axios.create({\r\n  baseURL: API_BASE_URL,\r\n  timeout: 10000,\r\n  headers: {\r\n    'Content-Type': 'application/json'\r\n  }\r\n});\r\n\r\n// Request interceptor for logging\r\napi.interceptors.request.use(\r\n  (config) => {\r\n    console.log(`ðŸš€ Making ${config.method.toUpperCase()} request to: ${config.url}`);\r\n    console.log('ðŸ“¦ Request data:', config.data);\r\n    return config;\r\n  },\r\n  (error) => {\r\n    console.error('âŒ Request error:', error);\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// Response interceptor for better error handling\r\napi.interceptors.response.use(\r\n  (response) => {\r\n    console.log('âœ… API Response:', response.data);\r\n    return response.data;\r\n  },\r\n  (error) => {\r\n    console.error('âŒ API Error Details:', {\r\n      status: error.response?.status,\r\n      statusText: error.response?.statusText,\r\n      data: error.response?.data,\r\n      headers: error.response?.headers\r\n    });\r\n    \r\n    if (error.response?.status === 400) {\r\n      const validationErrors = error.response.data;\r\n      console.error('ðŸ” Validation errors from server:', validationErrors);\r\n      \r\n      // Extract specific validation messages\r\n      let errorMessage = 'Validation failed';\r\n      if (validationErrors.errors) {\r\n        errorMessage = Object.values(validationErrors.errors).join(', ');\r\n      } else if (validationErrors.message) {\r\n        errorMessage = validationErrors.message;\r\n      }\r\n      \r\n      throw new Error(errorMessage);\r\n    }\r\n    \r\n    if (error.response?.status === 500) {\r\n      throw new Error('Server error. Please try again later.');\r\n    }\r\n    \r\n    if (error.code === 'ECONNABORTED') {\r\n      throw new Error('Request timeout. Please check your connection.');\r\n    }\r\n    \r\n    if (!error.response) {\r\n      throw new Error('Network error. Please check your connection and try again.');\r\n    }\r\n    \r\n    throw new Error(error.response?.data?.message || 'An unexpected error occurred.');\r\n  }\r\n);\r\n\r\nexport const getBugs = async () => {\r\n  try {\r\n    const response = await api.get('/bugs');\r\n    return response.bugs || [];\r\n  } catch (error) {\r\n    console.error('Error fetching bugs:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const createBug = async (bugData) => {\r\n  try {\r\n    // Ensure all required fields are present\r\n    const submissionData = {\r\n      title: bugData.title,\r\n      description: bugData.description,\r\n      priority: bugData.priority,\r\n      status: bugData.status || 'open',\r\n      environment: {\r\n        os: bugData.environment?.os,\r\n        browser: bugData.environment?.browser || '',\r\n        version: bugData.environment?.version || ''\r\n      },\r\n      stepsToReproduce: bugData.stepsToReproduce || '',\r\n      expectedBehavior: bugData.expectedBehavior || '',\r\n      actualBehavior: bugData.actualBehavior || ''\r\n    };\r\n\r\n    console.log('ðŸ“¤ Final data being sent to API:', JSON.stringify(submissionData, null, 2));\r\n    \r\n    return await api.post('/bugs', submissionData);\r\n  } catch (error) {\r\n    console.error('Error creating bug:', error);\r\n    throw error;\r\n  }\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}